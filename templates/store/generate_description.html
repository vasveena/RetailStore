{% extends 'base.html' %}
{% load static %}

{% block content %}

<section class="section-content padding-y bg">
<div class="container">

<!-- ============================ COMPONENT 1 ================================= -->
<div class="card">
	<div class="row no-gutters">
		<aside class="col-md-6">
			<article class="gallery-wrap"> 
				<div class="img-big-wrap mainImage">
                    <a href="{{ single_product.get_url }}"><img src="{{single_product.images.url}}"></a>
				</div> <!-- img-big-wrap.// -->
				
			</article> <!-- gallery-wrap .end// -->
			<ul class="thumb">
				<li>
					<a href="{{ single_product.images.url }}" target="mainImage"><img src="{{ single_product.images.url }}" alt="Product Image"></a>
					{% for i in product_gallery %}
					<a href="{{i.image.url}}" target="mainImage"><img src="{{i.image.url}}" alt="Product Image"></a>
					{% endfor %}
				</li>
			</ul>
		</aside>
		<main class="col-md-6 border-left">
    <article class="content-body">
      <div class="mb-4">
        <h2 class="title">{{single_product.product_name}}</h2>

		<div class="rating-star">
			<span>
					<i class="fa fa-star{% if single_product.averageReview < 0.5 %}-o{% elif single_product.averageReview >= 0.5 and single_product.averageReview < 1 %}-half-o {% endif %}" aria-hidden="true"></i>
					<i class="fa fa-star{% if single_product.averageReview < 1.5 %}-o{% elif single_product.averageReview >= 1.5 and single_product.averageReview < 2 %}-half-o {% endif %}" aria-hidden="true"></i>
					<i class="fa fa-star{% if single_product.averageReview < 2.5 %}-o{% elif single_product.averageReview >= 2.5 and single_product.averageReview < 3 %}-half-o {% endif %}" aria-hidden="true"></i>
					<i class="fa fa-star{% if single_product.averageReview < 3.5 %}-o{% elif single_product.averageReview >= 3.5 and single_product.averageReview < 4 %}-half-o {% endif %}" aria-hidden="true"></i>
					<i class="fa fa-star{% if single_product.averageReview < 4.5 %}-o{% elif single_product.averageReview >= 4.5 and single_product.averageReview < 5 %}-half-o {% endif %}" aria-hidden="true"></i>
<span>{{single_product.countReview}} reviews</span>
			</span>
		</div>


		<div class="mb-3"> 
				<var class="price h4">$ {{single_product.price}}</var> 
		</div> 

		<p>{{single_product.description}}</p>

				<form action="{% url 'generate_product_description' %}">
						<h4 class="title">Generate product description</h4>
                            <br>
                            Product Brand 
                            <input type="text" class="form-control" name="product_brand" id="product_brand" placeholder="Polo, Nike etc." required><br>
                            Product Category
                            <input type="text" class="form-control" name="product_category" id="product_category" placeholder="Shirt, Pant, Jacket etc." value="{{single_product.category}}" required><br>
                            Product Color
                            <input type="text" class="form-control" name="product_color" id="product_color" placeholder="Blue, Yellow etc." required><br>
                            Max number of words
                            <input type="text" class="form-control" name="max_length" id="max_length" placeholder="Blue, Yellow etc." required><br>
                            Product Details
							<textarea name="product_details" rows="6" class="form-control" placeholder="Provide product details. Eg: comfort, fit, material etc." required>{{ request.session.product_details }}</textarea>
							<br>
							<button type="submit" class="btn btn-primary"> <span class="text">Generate</span> <i class="fa fa-file-text-o"></i> </button>
				</form>
				
				{% if request.session.generated_flag %}
				<form action="#" method="POST">
					{% include 'includes/alerts.html' %}
					{% csrf_token %}
					    <br><br>
						<h6 class="title">Generated description</h6>					
							<textarea name="desc" rows="6" class="form-control">{{ request.session.generated_description }}</textarea>
							<br>
							
							<button type="submit" class="btn  btn-primary"> <span class="text">Re-generate</span> <i class="fa fa-file-text-o"></i></button>
							<button type="submit" class="btn  btn-primary"> <span class="text">Save description</span> <i class="fa fa-floppy-o"></i></button>
                            <a href="{{ single_product.get_url }}" class="btn btn-outline-primary">Go back <i class="fa fa-chevron-circle-left"></i></a>
				</form>
				{% endif %}
                
			</div>
		</article>

		</main> <!-- col.// -->
	</div> <!-- row.// -->
</div> <!-- card.// -->
<!-- ============================ COMPONENT 1 END .// ================================= -->

<br>


</div> <!-- container .//  -->
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->

{% endblock %}